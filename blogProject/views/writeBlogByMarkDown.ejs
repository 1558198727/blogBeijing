<!DOCTYPE html>
<html ng-app="app">
<head lang="en">
    <meta charset="UTF-8">
    <title>markdown</title>
    <link rel="shortcut icon" href="./img/HeadPhoto.jpg">
    <link rel="stylesheet" type="text/css" href="../markDown/bower_components/highlightjs/styles/atelier-cave.light.css">
    <link rel="stylesheet" type="text/css" href="../markDown/front-end/dist/assets/styles/customer.css">
    <script src="http://cdn.static.runoob.com/libs/jquery/1.10.2/jquery.min.js"></script>
    <!--<link rel="stylesheet" href="../css/bootstrap.min.css">-->
</head>
<body ng-controller="MarkdownController">
<div class="input-group">
    <span class="input-group-addon" id="basic-addon1">@</span>
    title
    <input type="text" class="form-control" id="title" placeholder="title" aria-describedby="basic-addon1">
    <span class="input-group-addon" id="basic-addon1">@</span>
    annotaton
    <input type="text" class="form-control" id="annotation" placeholder="content" aria-describedby="basic-addon1">
    <button class="btn btn-primary" id="commit">提交</button>
</div>


<nav class="navbar bg-black">
    <div class="container">
        <div class="title">
            <a href="#" class="col-white">Markdown</a>
            <a href="" class="col-white" ng-click="clean()">Clean</a>
            <a href="" class="title-right col-white" id="toText">toMarkdown</a>
            <a href="" class="title-right col-white" id="toHTML">toHTML</a>
        </div>
    </div>
</nav>

<div class="container fill main">
    <div class="left fill padding-right">

      <textarea class="inputText fill col-black" id="inputText" ng-model="inputText" onkeydown="updateViewHeight()" tab placeholder="markdown">
      </textarea>
    </div>
    <div class="right fill padding-left">
        <div class="outputText fill" id="outputText" ng-bind-html="outputText"></div>
    </div>
</div>

<script type="text/javascript" src="../markDown/bower_components/angular/angular.min.js"></script>
<script type="text/javascript" src="../markDown/bower_components/angular-sanitize/angular-sanitize.min.js"></script>
<script type="text/javascript" src="../markDown/bower_components/marked/lib/marked.js"></script>
<script type="text/javascript" src="../markDown/bower_components/highlightjs/highlight.pack.js"></script>
<script type="text/javascript" src="../markDown/front-end/dist/api/all.min.js"></script>
<script type="text/javascript" src="../markDown/front-end/dist/assets/js/customer.min.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-62120557-1', 'auto');
    ga('send', 'pageview');

</script>
<script type="text/javascript">
    console.log('If you have any questions or ideas , please contact me .');
    console.log('Email address : 1041897388@qq.com');
    console.log('Github : https://github.com/qianjiahao');

    var toHTMLBtn = document.getElementById("toHTML");
    var toTextBtn = document.getElementById("toText");
    toHTMLBtn.onclick = function () {
        var fileName = $("#title").val();
        toHTML(fileName);
    };
    toTextBtn.onclick = function () {
        var fileName = $("#title").val();
        toText(fileName);
    }
</script>

<!--ajax-->
<script type="text/javascript">
    window.onload = function () {


//        var inputVal = document.getElementById("inputText").value;
//        var html = document.getElementById('outputText').html();

        $("#commit").click(function () {
            var date = new Date();
//            var data ={
//                date :date,
//                title : $("#title").val(),
//                content : $("#content").val()
//            };

//            alert("date"+":"+data.date+"\n"+"title" +":"+data.title+"\n"+"content" +":"+data.content );
            $.ajax({
                type: "POST",
                url: "./writeBlogByMarkDown",
                dataType: "json",
                data: {
                    date :date,
                    title : $("#title").val(),
                    annotation:$("#annotation").val(),
                    content : $("#inputText").val()
                },
                success: function (data){
                    alert("发表成功");
//                    location.href = "/indexTwo";
                },
                error:function (data) {
                    console.log("出错了");
                }
            })
        })
    }
</script>
</body>
</html>
